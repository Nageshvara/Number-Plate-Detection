<!DOCTYPE html>
<html lang="en" dir="ltr">

<head>
  <meta charset="utf-8">
  <title>RP Detection</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM" crossorigin="anonymous"></script>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@800&display=swap" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=Roboto+Slab:wght@800&display=swap" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=Abril+Fatface&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="static/css/styles.css">
  <link rel="icon" href="static/favicon (1).ico" />
</head>

<body>

  <!---Navbar--->
  <section>
    <nav class="navbar navbar-expand-lg navbar-dark bg-dark">
      <div class="container-fluid">
        <a class="navbar-brand" href="#">RP Detection</a>
        <div class="collapse navbar-collapse" id="navbarNav">
          <ul class="navbar-nav">
            <li class="nav-item">
              <a class="nav-link active" aria-current="page" href="#">Home</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="#">Features</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="mailto:nagaesvara@student.tce.edu">Contact</a>
            </li>
          </ul>
        </div>
      </div>
    </nav>
  </section>
  <div class="container-fluid frontpg">
    <div class="row">
        <div class="col-lg-6">
          <h1 class="big-heading">Registration Plate Detection</h1>
          <button type="button" class="btn btn-outline-light d-grid gap-2 col-6 mx-auto getsb"><a href="#username">Get Started</a></button>
        </div>
        <div class="col-lg-6">
            <img src="static/ml.gif" alt="bg" class="gifim">
        </div>
      </div>
    </div>
<section >
<div class="container-fluid">
<div class="row">
    <div class="col-lg-4 lid">
        <h1 class="depe">Dependencies</h1>
        
    </div>
    <div class="col-lg-4 lil">
        <ul>
            <li>Numpy</li>
            <li>Matplotlib</li>
            <li>Pytesseract</li>
            <li>PIL</li>
        </ul>
    </div>
    <div class="col-lg-4">
        <img src="static/dp.gif" alt="Dependencies" class="dpim">
    </div>
</div>
</div>
</section>
  <div class="alert alert-danger alert-dismissible fade show text-center " role="alert" hidden="hidden" id="alertbutton">
    <strong>Oops!</strong> You should check in on some of those fields below.
    <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close" id ="close-button"></button>
  </div>
<!---Login Page--->
  <section class="vh-100 login-page">
    <div class="container">
      <div class="row ">
        <div class="col ">
          <div class="card">
            <div class="row">
              <div class="col-md-6 col-lg-5">
                <img src="https://mdbcdn.b-cdn.net/img/Photos/new-templates/bootstrap-login-form/draw2.webp" class="img-fluid" alt="Sample image">
              </div>
              <div class="col-md-6 col-lg-7">
                <div class="card-body ">
                  <form method="post">
                    <div class="d-flex align-items-center mb-3 pb-1">
                      <i class="fas fa-cubes fa-2x me-3" style="color: #ff6219;"></i>
                      <img src="https://cdn.dribbble.com/users/1418633/screenshots/15678998/media/5c46a9031ba2c975dfcf1b3ff4af3e4d.png?compress=1&resize=1000x750&vertical=top" class="brand-image"/>
                      <span class="h1 fw-bold mb-0">RP Detection</span>
                    </div>
                    <h5>Sign into your account</h5>
                    <div class="form-outline mb-4">
                      <input type="email" id="username" class="form-control form-control-lg" name="username" />
                      <label class="form-label" for="username">Name</label>
                    </div>
                    <div class="form-outline mb-4">
                      <input type="email" id="mail" class="form-control form-control-lg" name="Email" />
                      <label class="form-label" for="mail">Email address</label>
                    </div>
                    <div class="form-outline mb-4">
                      <input type="password" id="pass" class="form-control form-control-lg" name="password"/>
                      <label class="form-label" for="pass">Password</label>
                    </div>
                    <div class="pt-1 mb-4">
                      <button class="btn btn-dark btn-lg btn-block" type="button" id="login" >Login</button>
                    </div>
                    <a class="small text-muted" href="#!">Forgot password?</a>
                    <p class="mb-5 pb-lg-2" style="color: #393f81;">Don't have an account? <a href="{{ url_for('register') }}" style="color: #393f81;">Register here</a></p>
                    <a href="#!">Terms of use.</a>
                    <a href="">Privacy policy</a>
                  </form>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </section>

  <script type="module">
    // Import the functions you need from the SDKs you need
    import { initializeApp } from "https://www.gstatic.com/firebasejs/9.13.0/firebase-app.js";
    import { getAnalytics } from "https://www.gstatic.com/firebasejs/9.13.0/firebase-analytics.js";
    import { getDatabase,get, ref, set, child} from "https://www.gstatic.com/firebasejs/9.13.0/firebase-database.js";
    // TODO: Add SDKs for Firebase products that you want to use
    // https://firebase.google.com/docs/web/setup#available-libraries
  
    // Your web app's Firebase configuration
    // For Firebase JS SDK v7.20.0 and later, measurementId is optional
    const firebaseConfig = {
      apiKey: "AIzaSyC3gTAl176O1ZSgPuOj3fQl1zoyavb9jhU",
      authDomain: "rp-detection.firebaseapp.com",
      databaseURL: "https://rp-detection-default-rtdb.firebaseio.com",
      projectId: "rp-detection",
      storageBucket: "rp-detection.appspot.com",
      messagingSenderId: "824445637470",
      appId: "1:824445637470:web:4b387f5a04c3a8cfddb5cf",
      measurementId: "G-28C27795NW"
    };
  
    // Initialize Firebase
    const app = initializeApp(firebaseConfig);
    const analytics = getAnalytics(app);
    const db = getDatabase();

    var name = document.getElementById("name");
    var email = document.getElementById("email");
    var password = document.getElementById("password");
    var confirmedpass = document.getElementById("confirmedpass");
    var registerButton = document.getElementById("register");
    var enteredEmail = document.getElementById("mail");
    var enteredPass = document.getElementById("pass");
    var loginButton = document.getElementById("login");
    var userName = document.getElementById("username");

    function insertData(){
        set(ref(db,"Registered/"+name.value),{
            Name:name.value,
            Email:email.value,
            Password:password.value,
            ConfirmedPass:confirmedpass.value
        }).then(()=>{
            alert("Data is Entered");
        }).catch((error)=>{
            alert("Unsuccessful"+error);
        });
    }

    function selectData(){
      const dbr = ref(db);

      get(child(dbr,"Registered/"+name.value)).then((snapshot)=>{
        if(snapshot.exists()){
          email.value = snapshot.val().Email;
          password.value = snapshot.val().Password;
        }
        else{
          alert("No User Found !!");
        }
      }).catch((error)=>{
        alert("Unsccuessful !"+error);
      })
    }

    function updateData(){
      update(ref(db,"Registered/"+name.value),{
            Email:email.value,
            Password:password.value,
            ConfirmedPass:confirmedpass.value
        }).then(()=>{
            alert("Data is Entered");
        }).catch((error)=>{
            alert("Unsuccessful"+error);
        });
    }

    function checkUser(){
        const dbr = ref(db);

        get(child(dbr,"Registered/"+userName.value)).then((snapshot)=>{
          if(snapshot.exists()){
            if(enteredEmail.value == snapshot.val().Email && enteredPass.value == snapshot.val().Password){
              window.location.href="{{ url_for('upload') }}";
            }
            else{
              document.getElementById("alertbutton").removeAttribute("hidden");
            }
          }
          else{
            alert("No User Found !!");
          }
        }).catch((error)=>{
          alert("Unsccuessful !"+error);
        })
    }

    
    loginButton.addEventListener("click",checkUser);

</script>
<script src="index.js"></script>
</body>

</html>
